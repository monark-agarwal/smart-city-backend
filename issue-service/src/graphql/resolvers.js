const Issue=require('../models/issue');const { publishIssueEvent }=require('../kafka/producer');const resolvers={getIssues:async()=>await Issue.findAll(),getIssue:async({id})=>await Issue.findByPk(id),reportIssue:async({issue})=>{const newIssue=await Issue.create(issue);await publishIssueEvent('issue_created',newIssue);return newIssue;},updateIssueStatus:async({id,status})=>{const issue=await Issue.findByPk(id);if(!issue)throw new Error('Issue not found');issue.status=status;await issue.save();await publishIssueEvent('issue_updated',issue);return issue;}};module.exports=resolvers;
